"use client";
import { Avatar, AvatarFallback, AvatarImage } from "@/components/ui/avatar";
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu";
import { Sheet, SheetContent } from "@/components/ui/sheet";
import { useSidebar } from "@/store/sidebarOpen";
import { useState } from "react";
import { BiSearch } from "react-icons/bi";
import Sidebar from "../sidebar/DashboardSidebar";

const DashboardHeader = () => {
  const { handleOpenSidebar } = useSidebar();
  const [openSidebarSheet, setOpenSidebarSheet] = useState(false);
  const [openSearchbar, setOpenSearchbar] = useState(false);
  const handleOpenSidebarSheet = () => {
    setOpenSidebarSheet((prev) => !prev);
  };

  return (
    <header>
      <div className="flex items-center justify-between py-5">
        <div className="flex items-center gap-2">
          <button className="hidden xl:block" onClick={handleOpenSidebar}>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
            >
              <path
                d="M3.25 17.625V16.125H20.75V17.625H3.25ZM3.25 12.75V11.25H20.75V12.75H3.25ZM3.25 7.875V6.375H20.75V7.875H3.25Z"
                fill="#5A6A85"
              />
            </svg>
          </button>
          <button className=" xl:hidden" onClick={handleOpenSidebarSheet}>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
            >
              <path
                d="M3.25 17.625V16.125H20.75V17.625H3.25ZM3.25 12.75V11.25H20.75V12.75H3.25ZM3.25 7.875V6.375H20.75V7.875H3.25Z"
                fill="#5A6A85"
              />
            </svg>
          </button>
          <button onClick={() => setOpenSearchbar((prev) => !prev)}>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
            >
              <path
                d="M19.5504 20.575L13.2504 14.3C12.7504 14.7167 12.1754 15.0417 11.5254 15.275C10.8754 15.5083 10.2087 15.625 9.52539 15.625C7.80872 15.625 6.35872 15.0333 5.17539 13.85C3.99206 12.6667 3.40039 11.2167 3.40039 9.5C3.40039 7.8 3.99206 6.354 5.17539 5.162C6.35872 3.97067 7.80872 3.375 9.52539 3.375C11.2254 3.375 12.6671 3.96667 13.8504 5.15C15.0337 6.33333 15.6254 7.78333 15.6254 9.5C15.6254 10.2167 15.5087 10.9 15.2754 11.55C15.0421 12.2 14.7254 12.7667 14.3254 13.25L20.6004 19.525L19.5504 20.575ZM9.52539 14.125C10.8087 14.125 11.8964 13.675 12.7884 12.775C13.6797 11.875 14.1254 10.7833 14.1254 9.5C14.1254 8.21667 13.6797 7.125 12.7884 6.225C11.8964 5.325 10.8087 4.875 9.52539 4.875C8.22539 4.875 7.12972 5.325 6.23839 6.225C5.34639 7.125 4.90039 8.21667 4.90039 9.5C4.90039 10.7833 5.34639 11.875 6.23839 12.775C7.12972 13.675 8.22539 14.125 9.52539 14.125Z"
                fill="#5A6A85"
              />
            </svg>
          </button>
          {openSearchbar && (
            <div className="flex bg-slate-100 px-2 py-1.5 rounded-md w-full max-w-sm items-center space-x-2">
              <input
                className=" bg-transparent flex-1 border-none outline-none focus:outline-none ring-0"
                type="email"
                placeholder="Email"
              />
              <BiSearch size={24} />
            </div>
          )}
        </div>
        <div className="flex items-center gap-4">
          <button>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
            >
              <path
                d="M4.25 18.875V17.375H6.25V10.125C6.25 8.75838 6.671 7.55405 7.513 6.51205C8.35433 5.47072 9.43333 4.80005 10.75 4.50005V3.80005C10.75 3.45005 10.871 3.15405 11.113 2.91205C11.3543 2.67072 11.65 2.55005 12 2.55005C12.35 2.55005 12.6457 2.67072 12.887 2.91205C13.129 3.15405 13.25 3.45005 13.25 3.80005V4.50005C14.5667 4.80005 15.646 5.47072 16.488 6.51205C17.3293 7.55405 17.75 8.75838 17.75 10.125V17.375H19.75V18.875H4.25ZM12 21.8C11.5 21.8 11.075 21.625 10.725 21.275C10.375 20.925 10.2 20.5 10.2 20H13.8C13.8 20.5 13.625 20.925 13.275 21.275C12.925 21.625 12.5 21.8 12 21.8ZM7.75 17.375H16.25V10.125C16.25 8.94172 15.8373 7.93738 15.012 7.11205C14.1873 6.28738 13.1833 5.87505 12 5.87505C10.8167 5.87505 9.81267 6.28738 8.988 7.11205C8.16267 7.93738 7.75 8.94172 7.75 10.125V17.375Z"
                fill="#5A6A85"
              />
              <circle cx="20" cy="4" r="3.5" fill="#5D87FF" stroke="white" />
            </svg>
          </button>
          <button>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
            >
              <path
                d="M7.15 21.55C6.66667 21.55 6.25433 21.3793 5.913 21.038C5.571 20.696 5.4 20.2833 5.4 19.8C5.4 19.3167 5.571 18.904 5.913 18.562C6.25433 18.2207 6.66667 18.05 7.15 18.05C7.63333 18.05 8.04567 18.2207 8.387 18.562C8.729 18.904 8.9 19.3167 8.9 19.8C8.9 20.2833 8.729 20.696 8.387 21.038C8.04567 21.3793 7.63333 21.55 7.15 21.55ZM16.85 21.55C16.3667 21.55 15.9543 21.3793 15.613 21.038C15.271 20.696 15.1 20.2833 15.1 19.8C15.1 19.3167 15.271 18.904 15.613 18.562C15.9543 18.2207 16.3667 18.05 16.85 18.05C17.3333 18.05 17.7457 18.2207 18.087 18.562C18.429 18.904 18.6 19.3167 18.6 19.8C18.6 20.2833 18.429 20.696 18.087 21.038C17.7457 21.3793 17.3333 21.55 16.85 21.55ZM6.025 5.75L8.55 11.05H15.375C15.425 11.05 15.475 11.0373 15.525 11.012C15.575 10.9873 15.6083 10.95 15.625 10.9L18.325 6.025C18.3583 5.95833 18.3583 5.896 18.325 5.838C18.2917 5.77933 18.2417 5.75 18.175 5.75H6.025ZM5.3 4.25H19.175C19.5917 4.25 19.9043 4.425 20.113 4.775C20.321 5.125 20.3333 5.48333 20.15 5.85L16.925 11.65C16.775 11.9333 16.5627 12.154 16.288 12.312C16.0127 12.4707 15.7167 12.55 15.4 12.55H8.1L6.95 14.675C6.9 14.7583 6.896 14.8417 6.938 14.925C6.97933 15.0083 7.05 15.05 7.15 15.05H18.6V16.55H7.15C6.48333 16.55 5.98333 16.2627 5.65 15.688C5.31667 15.1127 5.30833 14.5417 5.625 13.975L7.05 11.4L3.4 3.75H1.5V2.25H4.35L5.3 4.25ZM8.55 11.05H15.55H8.55Z"
                fill="#5A6A85"
              />
            </svg>
          </button>
          <button>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
            >
              <path
                d="M11.925 21.2249L16.125 10.1499H18.05L22.25 21.2249H20.325L19.35 18.3999H14.875L13.875 21.2249H11.925ZM15.425 16.7999H18.75L17.125 12.2249H17.05L15.425 16.7999ZM4.625 18.4499L3.325 17.1499L8 12.4999C7.41667 11.8499 6.90833 11.1789 6.475 10.4869C6.04167 9.79557 5.65833 9.06657 5.325 8.2999H7.25C7.53333 8.86657 7.83333 9.37057 8.15 9.8119C8.46667 10.2539 8.84167 10.7166 9.275 11.1999C9.95833 10.4666 10.525 9.71257 10.975 8.9379C11.425 8.16257 11.8 7.33324 12.1 6.4499H1.875V4.6249H8.325V2.7749H10.175V4.6249H16.625V6.4499H13.95C13.6167 7.5499 13.175 8.61224 12.625 9.6369C12.075 10.6622 11.3917 11.6332 10.575 12.5499L12.8 14.7999L12.1 16.6999L9.25 13.8499L4.625 18.4499Z"
                fill="#5A6A85"
              />
            </svg>
          </button>
          <button>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
            >
              <path
                d="M6 19.625C5.55 19.625 5.16667 19.4667 4.85 19.15C4.53333 18.8333 4.375 18.45 4.375 18C4.375 17.55 4.53333 17.1667 4.85 16.85C5.16667 16.5333 5.55 16.375 6 16.375C6.45 16.375 6.83333 16.5333 7.15 16.85C7.46667 17.1667 7.625 17.55 7.625 18C7.625 18.45 7.46667 18.8333 7.15 19.15C6.83333 19.4667 6.45 19.625 6 19.625ZM12 19.625C11.55 19.625 11.1667 19.4667 10.85 19.15C10.5333 18.8333 10.375 18.45 10.375 18C10.375 17.55 10.5333 17.1667 10.85 16.85C11.1667 16.5333 11.55 16.375 12 16.375C12.45 16.375 12.8333 16.5333 13.15 16.85C13.4667 17.1667 13.625 17.55 13.625 18C13.625 18.45 13.4667 18.8333 13.15 19.15C12.8333 19.4667 12.45 19.625 12 19.625ZM18 19.625C17.55 19.625 17.1667 19.4667 16.85 19.15C16.5333 18.8333 16.375 18.45 16.375 18C16.375 17.55 16.5333 17.1667 16.85 16.85C17.1667 16.5333 17.55 16.375 18 16.375C18.45 16.375 18.8333 16.5333 19.15 16.85C19.4667 17.1667 19.625 17.55 19.625 18C19.625 18.45 19.4667 18.8333 19.15 19.15C18.8333 19.4667 18.45 19.625 18 19.625ZM6 13.625C5.55 13.625 5.16667 13.4667 4.85 13.15C4.53333 12.8333 4.375 12.45 4.375 12C4.375 11.55 4.53333 11.1667 4.85 10.85C5.16667 10.5333 5.55 10.375 6 10.375C6.45 10.375 6.83333 10.5333 7.15 10.85C7.46667 11.1667 7.625 11.55 7.625 12C7.625 12.45 7.46667 12.8333 7.15 13.15C6.83333 13.4667 6.45 13.625 6 13.625ZM12 13.625C11.55 13.625 11.1667 13.4667 10.85 13.15C10.5333 12.8333 10.375 12.45 10.375 12C10.375 11.55 10.5333 11.1667 10.85 10.85C11.1667 10.5333 11.55 10.375 12 10.375C12.45 10.375 12.8333 10.5333 13.15 10.85C13.4667 11.1667 13.625 11.55 13.625 12C13.625 12.45 13.4667 12.8333 13.15 13.15C12.8333 13.4667 12.45 13.625 12 13.625ZM18 13.625C17.55 13.625 17.1667 13.4667 16.85 13.15C16.5333 12.8333 16.375 12.45 16.375 12C16.375 11.55 16.5333 11.1667 16.85 10.85C17.1667 10.5333 17.55 10.375 18 10.375C18.45 10.375 18.8333 10.5333 19.15 10.85C19.4667 11.1667 19.625 11.55 19.625 12C19.625 12.45 19.4667 12.8333 19.15 13.15C18.8333 13.4667 18.45 13.625 18 13.625ZM6 7.625C5.55 7.625 5.16667 7.46667 4.85 7.15C4.53333 6.83333 4.375 6.45 4.375 6C4.375 5.55 4.53333 5.16667 4.85 4.85C5.16667 4.53333 5.55 4.375 6 4.375C6.45 4.375 6.83333 4.53333 7.15 4.85C7.46667 5.16667 7.625 5.55 7.625 6C7.625 6.45 7.46667 6.83333 7.15 7.15C6.83333 7.46667 6.45 7.625 6 7.625ZM12 7.625C11.55 7.625 11.1667 7.46667 10.85 7.15C10.5333 6.83333 10.375 6.45 10.375 6C10.375 5.55 10.5333 5.16667 10.85 4.85C11.1667 4.53333 11.55 4.375 12 4.375C12.45 4.375 12.8333 4.53333 13.15 4.85C13.4667 5.16667 13.625 5.55 13.625 6C13.625 6.45 13.4667 6.83333 13.15 7.15C12.8333 7.46667 12.45 7.625 12 7.625ZM18 7.625C17.55 7.625 17.1667 7.46667 16.85 7.15C16.5333 6.83333 16.375 6.45 16.375 6C16.375 5.55 16.5333 5.16667 16.85 4.85C17.1667 4.53333 17.55 4.375 18 4.375C18.45 4.375 18.8333 4.53333 19.15 4.85C19.4667 5.16667 19.625 5.55 19.625 6C19.625 6.45 19.4667 6.83333 19.15 7.15C18.8333 7.46667 18.45 7.625 18 7.625Z"
                fill="#5A6A85"
              />
            </svg>
          </button>

          <DropdownMenu>
            <DropdownMenuTrigger>
              <Avatar>
                <AvatarImage src="https://github.com/shadcn.png" />
                <AvatarFallback>CN</AvatarFallback>
              </Avatar>
            </DropdownMenuTrigger>
            <DropdownMenuContent align="end">
              <DropdownMenuLabel>My Account</DropdownMenuLabel>
              <DropdownMenuSeparator />
              <DropdownMenuItem>Profile</DropdownMenuItem>
              <DropdownMenuItem>Billing</DropdownMenuItem>
              <DropdownMenuItem>Team</DropdownMenuItem>
              <DropdownMenuItem>Subscription</DropdownMenuItem>
            </DropdownMenuContent>
          </DropdownMenu>
        </div>
      </div>
      <Sheet open={openSidebarSheet} onOpenChange={setOpenSidebarSheet}>
        <SheetContent>
          <Sidebar />
        </SheetContent>
      </Sheet>
    </header>
  );
};

export default DashboardHeader;
